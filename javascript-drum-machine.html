
<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Golden Triangle Software</title>
		<meta charset="UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<link rel="icon" type="image/png" href="assets/favicon.png"/>
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:300">
		<link rel="stylesheet" href="assets/css/font-awesome/css/font-awesome.min.css">
		<link rel="stylesheet" href="assets/lightbox/dist/css/lightbox.min.css">
		<link rel='stylesheet' href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css?ver=6.0.1" type='text/css' media='all' />
		<link rel="stylesheet" href="assets/css/style.css">
		<script src="assets/js/jquery-3.2.1.min.js"></script> 
	</head>

<body class="javascript-drum-machine">
<header>
	<nav>
		<ul>
			<li><a href="/">Sites</a></li>
			<li>
				<button aria-expanded="false">Projects</button>
				<ul>
					<li><a href="/javascript-drum-machine">Javascript Drum Machine</a></li>
					<li><a href="/javascript-calculator">Samsung Galaxy S6 Calculator</a></li>
					<li><a href="/tic-tac-toe">Tic Tac Toe</a></li>
					<li><a href="/simon">Simon</a></li>
					<li><a href="/pomodoro">Pomodoro</a></li>
				</ul>
			</li>	
			<li><a href="/about">About</a></li>							
		</ul>
	</nav>
</header>

<main><h1>Javascript Drum Machine</h1>
<h2>Set tempo with external MIDI device, upload your own samples, and record your own drum loops in the web browser.</h2>



<div class="flex-container outer">
      <div class="view">    
        <form enctype="multipart/form-data" method="POST" action="/music/upload/upload.php" id="upload">
          <div class="flex-container">
            <input id="inputfield" type="file" name="upfile[]" multiple="" required="">
            <input id="button" type="submit" value="UPLOAD">
          </div>
        </form>
        <form method="GET" action="/music/directory" id="currentFiles" class="hidden">
          <div class="flex-container" id="wavContainer">
            <input id="getFiles" type="submit" value="LOAD .WAV FILES">
          </div>
        </form>
        <form action="/music/delete" id="clearDirectory" class="hidden">
          <div class="flex-container">
            <input type="submit" value="CLEAR DIRECTORY" id="clear">
          </div>
        </form>
        
        <div class="instructions">
          <h3>Instructions</h3>
          <ul>
            <li><strong><u>DRUM MACHINE</u></strong>: Click on the white squares to play different sounds on the default drum machine.
            <a href="http://drum-machine.maryrosecook.com/" target="blank" rel="noopener">Based on this drum machine by Mary Rose Cook.</a></li>
            <li><strong><u>RECORD</u></strong>: Click &#8220;RECORD&#8221; to start recording your drum loop. 
            Click again to stop recording. Then click again to turn your drum loop 
            into an HTML audio element that you can download as a .wav file (click the three dots on the right side of the audio element, then click &#8220;Download&#8221;).</li>
            <li><strong><u>CLEAR TRACKS</u></strong>: Press &#8220;C&#8221; on your keyboard to clear the tracks.</li>
            <li><strong><u>UPLOAD</u></strong>: You can upload your own sample packs to play with this drum machine.
            Click &#8220;Choose Files.&#8221; Hold &#8220;Shift&#8221; and click to select a group of audio files to upload from your computer, 
            or hold &#8220;Ctrl&#8221; and click to select multiple files one by one. For now, only .wav files are accepted.
            Click &#8220;Upload&#8221; once you&#8217;ve selected the files you want. A directory will be created on this server based on your IP address.
            This directory will be deleted periodically in order to stay within storage limits.<strong> Please wait a minute or two between uploads to ensure files are properly indexed!</strong></li>     
            <li><strong><u>LOAD .WAV FILES</u></strong>: Use the dropdown to choose from different sample packs you have uploaded.
            Then, click &#8220;LOAD .WAV FILES&#8221; to load your samples into the drum machine. If you want to go back to the default drum machine (Casio SA-10 Samples),
            just refresh the page.</li>
            <li><strong><u>CLEAR DIRECTORY</u></strong>: This will delete your personal directory along with all of the files you have uploaded.</li>
            <li><strong><u>MIDI</u></strong>: Web browsers aren&#8217;t great at keeping accurate time. If you want a more accurate BPM, 
            then you can hook up an external sampler or drum machine to your computer (via MIDI interface) to keep time. 
            Tell the drum machine to play 16 straight sixteenth notes, 
            and this machine in the browser will update its count every time your external 
            drum machine plays a note. Click the &#8220;MIDI&#8221; button, and try it out! 
            While MIDI is off, the browser will do its best to keep time on its own. </li>
          </ul>
        </div>
      </div>

      <div class="container">
        <div class="recordContainer">
          <div class="flex-container">
            <button id="record">RECORD</button>
            <button id="stop" class="hidden">STOP</button>
            <button id="wav" class="hidden">CREATE .WAV FILE</button>
            <button id="midi">MIDI OFF</button>
          </div>
        </div>
        <div class="flex-container">
          <canvas id="screen" width="637" height="350"></canvas>
        </div>
      </div>
    </div>
</main>
					<script src="https://cdn.rawgit.com/mattdiamond/Recorderjs/08e7abd9/dist/recorder.js"></script>
					<script src="assets/js/client.js"></script>
					<script src="assets/js/drummachine.js"></script>
						<script src="assets/lightbox/dist/js/lightbox.min.js" defer></script>

		<script>
			$( window ).scroll( function() {
				if ($(this).scrollTop() > 700) {
					document.querySelector( '.frankie' ).classList.add( 'animated' );
					document.querySelector( '.frankie' ).classList.add( 'fadeInRight' );
				}
			} );

			let parentMenuItems = Array.from( document.querySelectorAll( "nav ul li ul" ) );

			parentMenuItems.forEach((element) => {
				let menuButton = element.parentElement.querySelector("button");
				let menuLastChild = element.querySelector("li:last-child > a");

				if( menuButton ) {
					menuButton.addEventListener("focusin", function () {
						menuButton.setAttribute("aria-expanded", true);
					} );

					menuLastChild.addEventListener("blur", function () {
						menuButton.setAttribute("aria-expanded", false);
					} );

					menuButton.addEventListener("mousedown", function () {
						let menuState = menuButton.getAttribute("aria-expanded");
						if (menuState === "false") { menuButton.setAttribute("aria-expanded", true); }
						else { menuButton.setAttribute("aria-expanded", false);}
					} );
				}
			} );
		</script>
	</body>
</html>

